{% extends "account/custom_base.html" %}

{% load account %}

{% block title %}
  Reset Password
{% endblock %}

{% block content_main_title %}
  Reset Password
{% endblock %}

{% block content_main_body %}
  {% if user.is_authenticated %}
    <div class="">{% include "account/snippets/already_logged_in.html" %}</div>
  {% endif %}

  <p class="">Enter your email below, and we'll send you a link to reset your password:</p>

  <form method="post" action="{% url 'account_reset_password' %}" novalidate>
    {% csrf_token %}

    {% if form.non_field_errors %}
      <div class="">
        {% for error in form.non_field_errors %}
          <p>{{ error }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <div class="">
      <label for="{{ form.email.id_for_label }}" class="">Email</label>
      <input
        type="email"
        name="{{ form.email.name }}"
        id="{{ form.email.id_for_label }}"
        value="{% if form.email.value %}{{ form.email.value }}{% elif user.is_authenticated and user.email %}{{ user.email }}{% else %}{% endif %}"
        class=""
        required
      />
      {% if form.email.errors %}
        <p class="">{{ form.email.errors.0 }}</p>
      {% endif %}
    </div>

    <button type="submit" class="">Reset Password</button>
  </form>

  <div class="">
    Please contact us at <a href="mailto:{{ support_email }}">{{ support_email }}</a> if you
    have any trouble resetting your password.
  </div>
{% endblock %}
